<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Smokey the Bear Fire Danger</title>
    <meta name="description" content="Current fire danger for SLO County">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/index.css">

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <!--script src="jquery.xdomainajax.js"></script-->
    <!--script src="jquery.ajax-cross-origin.min.js"></script-->

    <script src="index.js"></script>
  </head>
  <body>
      <h1>Today's Fire Danger</h1>
      <div id="content">
          <button id="low" onclick="low()">Low</button>
          <button id="moderate" onclick="moderate()">Moderate</button>
          <button id="high" onclick="high()">High</button>
          <button id="veryhigh" onclick="veryhigh()">Very High</button>
          <button id="extreme" onclick="extreme()">Extreme</button>
          <button id="getstatus" onclick="getstatus_lastablas()">GET THE STATUS</button>
      </div>
      <br /><br />
      <div>
        <img id="smokey" src="./img/extreme.png"/>
      </div>

      <div id="data">
        
      </div>
        <script type="text/javascript">
$(function() {
  $( '#getstatus' ).click(function(){
    var url = 'https://fam.nwcg.gov/wims/xsql/nfdrs.xsql?stn=44904&sig=&type=&start=18-MAR-15&end=18-MAR-15&time=&user=4e1&priority=';
    
    $.ajax({
      crossOrigin: true,
      url: url,
      proxy: "proxy3.php", //use local proxy because Google limits the use of Google Apps Script
      //dataType: "json", //no need. if you use crossOrigin, the dataType will be override with "json"
      //charset: 'ISO-8859-1', //use it to define the charset of the target url
      context: {},
      success: function(data) {
        //alert(data);
        $( '#data' ).html(data);
      }
    })
    .done(function( data, textStatus, jqXHR ) {
      //alert(data);
    });
  });
  
/*########################################################
  before the use of $.getJSON you need to set {crossOrigin: true} through $.ajaxSetup
  
  $.ajaxSetup({
    crossOrigin: true
  });
  
  $.getJSON(url, null, function(data) {
    $( '#test' ).html(data);
  });
########################################################*/
  
}); 
      </script>
  </body>
</html>